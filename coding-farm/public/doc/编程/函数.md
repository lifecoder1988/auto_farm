函数

使用 function 关键字来自定义一个新的函数：
function f(arg1, arg2 = false) {
	// 函数代码
}

使用 () 来调用某个函数：
f(42)

另请参阅<u><link="docs/scripting/scopes.md">作用域</link></u>来了解函数中的局部变量和全局变量。

介绍

你已经见过像 harvest() 这样的内置函数。
你也可以自定义函数，从而以模块化的方式组织你的代码。简单来说，你可以给一个代码块命名，之后可以从任何地方调用该代码块。

函数定义

例如，你可以定义一个多次移动无人机的函数。

function move_n_dir(n, dir) {
	for (let i = 0; i < n; i++) {
		move(dir)
	}
}

function 关键字表示这定义了一个函数。
move_n_dir 是函数绑定的名称，这是你自定义的变量名称，用于调用该函数。
n 和 dir 是形参，表示接收传入函数的实参的变量。你可以根据需要定义多个形参（没有数量限制）。
{} 内则是函数被调用时会运行的代码块。

根据上述定义，以下代码将无人机向 North 移动 10 格，向 West 移动 2 格。

move_n_dir(10, North)
move_n_dir(2, West)

在 JavaScript 中，你也可以把函数看成值：
const functionVar = function() { ... }

像其他赋值一样，函数必须在调用前定义，否则会报错（使用 function 声明除外，因为会提升）。
例如，下面的写法会报错：

func()
const func = () => {}

返回值

使用 return 关键字可以让函数返回 1 个值。
例如，以下函数定义了一个异或运算（只有一个值为 true 时返回 true）：

function xor(a, b) {
	return a !== b
}

if (xor(true, false)) {
	doAFlip()
}

在 JavaScript 中，你可以用数组返回多个值：

function f() {
	return [1, 2]
}

const [a, b] = f()

默认参数

你还可以添加默认值，在没有传递参数时会使用默认值：

function f(a = false) {
	if (a) {
		doAFlip()
	}
}

f()
f(true)

有默认值的参数后面不能跟没有默认值的参数。

高级函数用法

和其他的值一样，函数也是值，而 function 声明就像是给变量赋值。
因此你可以编写如下代码：

function f() {
	function d() {
		doAFlip()
	}
	return d
}

f()()

这里 f() 调用函数 f，它会定义并返回一个新函数 d。第二个 () 执行返回的函数并执行 doAFlip() 操作。
（这种写法不建议，因为可读性差。）

将其他函数作为参数的函数可以让你写出很有创意的代码：

function f(g, arg) {
	for (let i = 0; i < 10; i++) {
		g(arg)
	}
}

f(move, North)
f(use_item, Items.Fertilizer)

这段代码将无人机向 North 移动 10 次，然后使用肥料 10 次。
