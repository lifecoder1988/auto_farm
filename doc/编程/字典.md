字典（JavaScript 中的对象与 Map）

字典是一种可以将键 (key) 映射到值 (value) 的数据结构。在 JavaScript 中，你可以使用 **对象（Object）** 或 **Map** 来实现字典的功能。

对象 Object 使用方式更接近 Python 的字典，但只能使用字符串或符号作为 key。  
Map 则可以使用任何值作为 key，包括对象、数组等。

使用对象作为字典


对象的创建方式如下：

const right_of = {
	North: East,
	East: South,
	South: West,
	West: North,
}

冒号前面是 key，冒号后面是对应的 value。  
上面的对象将每个方向映射到它右边的方向。

下面是另一个将无人机位置映射到它下方实体的对象（注意：对象的 key 会变成字符串）：

const x = get_pos_x(), y = get_pos_y()
const entity_dict = {
	[`${x},${y}`]: get_entity_type()
}

获取 key 对应的 value 的方式与访问数组类似：

const value = dict[key]

示例：

const orientation = right_of[South]
// 这会将 orientation 设置为 West

向对象添加一个新键值对：

dict[key] = value

示例：

entity_dict[`${get_pos_x()},${get_pos_y()}`] = get_entity_type()

如果添加已存在的 key，它会覆盖之前的 value。

删除键值对可以使用：

delete dict[key]

判断某个 key 是否存在：

if (key in dict) {
	// ...
}

使用 for...in 可以迭代对象的所有 key：

for (const key in dict) {
	const value = dict[key]
}

迭代顺序一般按创建顺序排列，但不保证完全稳定。

---

使用 Map（支持任意值作为 key）


如果你想让元组或数组当作 key，应使用 Map：

const right_of = new Map([
	[North, East],
	[East, South],
	[South, West],
	[West, North],
])

const entity_dict = new Map()
entity_dict.set([x, y], get_entity_type())

获取 value：

const orientation = right_of.get(South)

添加或更新键值对：

dict.set(key, value)

删除键值对：

dict.delete(key)

判断 key 是否存在：

dict.has(key)

遍历 Map 的所有 key：

for (const key of dict.keys()) {
	const value = dict.get(key)
}

Map 的迭代顺序就是插入顺序。

另请参阅<u><link="docs/scripting/sets.md">集合</link></u>
