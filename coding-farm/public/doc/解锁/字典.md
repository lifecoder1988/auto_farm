字典（JavaScript 中的 Object 与 Map）

JavaScript 中可以使用 **Object（对象）** 或 **Map** 来实现“字典”这种 key → value 的映射结构。

Object 比较适合字符串 key，  
Map 则适合需要任意类型（例如数组、元组）作为 key 的场景。

---

使用 Object 作为字典


对象的创建方式如下：

const right_of = {
	North: East,
	East: South,
	South: West,
	West: North,
}

冒号前面是 key，后面是对应的 value。  
上面的对象将每个方向映射到它右边的方向。

示例（使用坐标时，需要将 key 转成字符串）：

const x = get_pos_x(), y = get_pos_y()
const entity_dict = {
	[`${x},${y}`]: get_entity_type()
}

通过 key 获取对应的 value：

const value = dict[key]

示例：

const orientation = right_of[South]
// orientation 将被设置为 West

往字典中添加或更新键值对：

dict[key] = value

示例：

entity_dict[`${get_pos_x()},${get_pos_y()}`] = get_entity_type()

删除键值对：

delete dict[key]

判断 key 是否存在：

if (key in dict) {
	// ...
}

迭代所有 key：

for (const key in dict) {
	const value = dict[key]
}

注意：Object 的 key 是无序的（尽管现代引擎保持某种稳定顺序，但不应依赖）。

---

使用 Map（支持任意类型作为 key，推荐）


如果你想用元组（例如 (x, y)）作为 key，使用 Map 更合适：

const right_of = new Map([
	[North, East],
	[East, South],
	[South, West],
	[West, North],
])

const x = get_pos_x(), y = get_pos_y()
const entity_dict = new Map()
entity_dict.set([x, y], get_entity_type())

通过 key 获取值：

const orientation = right_of.get(South)

添加或更新 key：

dict.set(key, value)

删除 key：

dict.delete(key)

判断 key 是否存在：

dict.has(key)

迭代所有 key：

for (const key of dict.keys()) {
	const value = dict.get(key)
}

Map 的迭代顺序就是插入顺序。

---

另请参阅<u><link="docs/scripting/sets.md">集合</link></u>
