函数

使用 function 关键字来自定义一个新的函数：
function f(arg1, arg2 = false) {
	// 函数代码
}

使用 () 来调用某个函数：
f(42)

另请参阅<u><link="docs/scripting/scopes.md">作用域</link></u>来了解函数中的局部变量和全局变量。

介绍

你已经见过像 harvest() 这样的内置函数。
你也可以自定义函数，从而以模块化的方式组织代码。简单来说，你可以给一个代码块命名，之后能从任何地方调用它。

函数定义

例如，你可以定义一个能多次移动无人机的函数：

function move_n_dir(n, dir) {
	for (let i = 0; i < n; i++) {
		move(dir)
	}
}

function 关键字表示这定义了一个函数。
move_n_dir 是函数名称。
n 和 dir 是参数（形参），用于接收调用时传入的值（实参）。
{} 内是函数在调用时会执行的代码块。

以下代码让无人机先向 North 移动 10 格，再向 West 移动 2 格：

move_n_dir(10, North)
move_n_dir(2, West)

在 JavaScript 中，可以把函数理解为：

functionVar = function() { ... }

和变量赋值一样，函数必须在调用之前定义（若使用 function 声明，会被提升）。

下面的写法会报错（因为 func 尚未赋值）：

func()
const func = () => {}

返回值

使用 return 关键字可以让函数返回 1 个值。

function xor(a, b) {
	return a !== b
}

if (xor(true, false)) {
	doAFlip()
}

需要返回多个值时，可以使用数组：

function f() {
	return [1, 2]
}

const [a, b] = f()

默认参数

JavaScript 同样支持默认参数：

function f(a = false) {
	if (a) {
		doAFlip()
	}
}

f()
f(true)

默认参数后不能跟没有默认值的参数。

高级函数用法

函数也是值，因此你可以把它们返回或作为参数传递：

function f() {
	function d() {
		doAFlip()
	}
	return d
}

f()()
// 第一个 () 执行 f，并返回 d
// 第二个 () 执行 d

（这种写法不推荐，因为不容易读懂。）

将函数作为参数，可以构建更灵活的逻辑：

function f(g, arg) {
	for (let i = 0; i < 10; i++) {
		g(arg)
	}
}

f(move, North)
f(use_item, Items.Fertilizer)

// 以上代码会向 North 移动 10 次，然后使用肥料 10 次
